<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>I'm Sorry, Shona</title>

  <style>
    :root{
      --bg1:#070814;
      --bg2:#2a0f22;
      --pink:#ff4da6;
      --pink2:#ff9bd6;
      --card: rgba(255,255,255,.08);
      --border: rgba(255,255,255,.16);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1000px 700px at 18% 18%, rgba(255,77,166,.26), transparent 60%),
        radial-gradient(900px 650px at 80% 70%, rgba(255,155,214,.18), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
      scroll-behavior:smooth;
    }

    /* Floating hearts */
    .heart{
      position:fixed; left:0; top:0;
      transform: translate(-50%, -50%);
      pointer-events:none;
      user-select:none;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
      animation: floatUp linear forwards;
      z-index: 3;
    }
    @keyframes floatUp{
      0%   { transform: translate(var(--x), var(--y)) scale(var(--s)) rotate(var(--r)); opacity: 0; }
      12%  { opacity: 1; }
      100% { transform: translate(var(--x2), var(--y2)) scale(calc(var(--s) * 1.15)) rotate(calc(var(--r) + 20deg)); opacity: 0; }
    }

    /* Confetti */
    .confetti{
      position:fixed;
      left:0; top:0;
      width:8px; height:14px;
      border-radius:3px;
      pointer-events:none;
      animation: fall linear forwards;
      z-index: 4;
    }
    @keyframes fall{
      0%{ transform: translate(var(--cx), var(--cy)) rotate(var(--cr)); opacity:1; }
      100%{ transform: translate(var(--cx2), var(--cy2)) rotate(calc(var(--cr) + 360deg)); opacity:0; }
    }

    /* Sections */
    section{
      min-height:100vh;
      display:grid;
      place-items:center;
      padding: 32px 16px;
    }
    .card{
      width:min(900px, 95vw);
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 26px;
      padding: 26px 18px;
      text-align:center;
      backdrop-filter: blur(12px);
      box-shadow: 0 22px 80px rgba(0,0,0,.45);
      position:relative;
      overflow:hidden;
    }
    h1{
      margin:0 0 10px;
      font-size: clamp(34px, 5.2vw, 58px);
      text-shadow: 0 16px 45px rgba(255,77,166,.30);
    }
    p{
      margin:0;
      color: var(--muted);
      font-size: clamp(16px, 2.2vw, 20px);
      line-height: 1.55;
    }

    .btnRow{
      margin-top:18px;
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }
    button{
      border:0;
      cursor:pointer;
      padding:12px 16px;
      border-radius:14px;
      font-weight:900;
      background: linear-gradient(135deg, var(--pink2), var(--pink));
      color:#160814;
      box-shadow: 0 12px 30px rgba(255,77,166,.25);
      transition: transform .12s ease, filter .12s ease;
    }
    button:hover{ transform: translateY(-1px); filter: brightness(1.02); }
    button:active{ transform: translateY(1px); }

    .ghost{
      background: rgba(255,255,255,.10);
      color: rgba(255,255,255,.92);
      border: 1px solid rgba(255,255,255,.18);
      box-shadow:none;
    }

    .small{
      margin-top:12px;
      font-size: 13px;
      color: rgba(255,255,255,.62);
      min-height: 18px;
    }

    /* Rising letter */
    .risingWrap{
      position:fixed;
      left:50%;
      bottom:-420px;
      transform: translateX(-50%);
      width:min(640px, 94vw);
      z-index: 10;
      animation: rise 1.2s cubic-bezier(.2,.9,.2,1) forwards;
      filter: drop-shadow(0 22px 60px rgba(0,0,0,.55));
    }
    @keyframes rise{
      to{ bottom: 22px; }
    }

    .envelope{
      position:relative;
      height: 320px;
      border-radius: 22px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      overflow:hidden;
    }
    .envBack{ position:absolute; inset:0; background: linear-gradient(180deg, rgba(255,255,255,.13), rgba(255,255,255,.06)); }
    .envBottom{
      position:absolute; left:0; right:0; bottom:0; height:62%;
      background: rgba(255,255,255,.08);
      clip-path: polygon(0 0, 50% 55%, 100% 0, 100% 100%, 0 100%);
      border-top: 1px solid rgba(255,255,255,.18);
    }
    .envTop{
      position:absolute; left:0; right:0; top:0; height:62%;
      background: rgba(255,255,255,.10);
      clip-path: polygon(0 0, 100% 0, 50% 62%);
      border-bottom: 1px solid rgba(255,255,255,.18);
    }
    .paperPeek{
      position:absolute;
      left:10%; right:10%;
      bottom: 26px;
      height: 78%;
      background: rgba(255,255,255,.95);
      border-radius: 14px;
      transform: translateY(40%);
      transition: transform .35s ease;
    }
    .envelope:hover .paperPeek{ transform: translateY(32%); }

    /* Heart ‚Äúseal‚Äù button */
    .seal{
      position:absolute;
      left:50%;
      top: 54%;
      transform: translate(-50%,-50%);
      width: 148px;
      height: 148px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.45), rgba(255,255,255,.08) 55%, rgba(0,0,0,.12));
      border: 1px solid rgba(255,255,255,.18);
      display:grid;
      place-items:center;
      cursor:pointer;
      user-select:none;
      z-index: 11;
    }
    .sealInner{
      width: 120px;
      height: 120px;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(255,155,214,.98), rgba(255,77,166,.98));
      display:grid;
      place-items:center;
      box-shadow: 0 14px 34px rgba(255,77,166,.25);
      border: 2px solid rgba(255,255,255,.35);
      color:#140612;
      font-weight: 1000;
      text-align:center;
      padding: 10px;
      line-height:1.15;
    }
    .sealInner .big{
      font-size: 34px;
      margin-bottom: 6px;
    }
    .sealInner .txt{
      font-size: 14px;
      letter-spacing:.2px;
    }

    /* Modal letter */
    .modal{
      position:fixed; inset:0;
      display:none;
      place-items:center;
      background: rgba(0,0,0,.62);
      backdrop-filter: blur(10px);
      z-index: 50;
      padding: 16px;
    }
    .modal.show{ display:grid; }
    .letter{
      width:min(880px, 96vw);
      max-height: 86vh;
      overflow:auto;
      border-radius: 22px;
      background: rgba(255,255,255,.96);
      color:#180816;
      box-shadow: 0 26px 90px rgba(0,0,0,.55);
    }
    .letterHeader{
      position:sticky; top:0;
      background: linear-gradient(180deg, rgba(255,220,236,.98), rgba(255,255,255,.98));
      border-bottom: 1px solid rgba(0,0,0,.08);
      padding: 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .letterHeader b{ color:#3a0c2b; }
    .closeX{
      border:0;
      background: rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.10);
      color:#180816;
      padding:10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight: 900;
    }
    .letterBody{
      padding: 18px 18px 22px;
      text-align:left;
      line-height:1.55;
      font-size: 16px;
      white-space: pre-wrap;
    }
    .divider{
      width:min(900px, 95vw);
      height:1px;
      background: rgba(255,255,255,.18);
      border-radius: 999px;
      margin: 12px auto 0;
    }

    .footerLove{
      font-weight: 1000;
      font-size: clamp(18px, 2.6vw, 22px);
      color: rgba(255,255,255,.92);
    }
  </style>
</head>

<body>

  <!-- Rising envelope -->
  <div class="risingWrap" id="risingWrap">
    <div class="envelope">
      <div class="envBack"></div>
      <div class="envTop"></div>
      <div class="envBottom"></div>
      <div class="paperPeek" aria-hidden="true"></div>

      <div class="seal" id="openLetter" title="Click here">
        <div class="sealInner">
          <div class="big">‚ù§</div>
          <div class="txt">Click here</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Letter modal -->
  <div class="modal" id="modal">
    <div class="letter" role="dialog" aria-modal="true" aria-label="Letter">
      <div class="letterHeader">
        <b>For you, Shona üíå</b>
        <button class="closeX" id="closeModal">Close ‚úï</button>
      </div>
      <div class="letterBody" id="letterText"></div>
      <div style="padding:0 18px 18px;">
        <button id="scrollFromLetter" style="width:100%;">Scroll</button>
      </div>
    </div>
  </div>

  <!-- Section 1 (blank behind envelope) -->
  <section id="top">
    <div class="card">
      <h1>I‚Äôm sorry, Shona</h1>
      <p>Open the letter below.</p>
      <div class="small">(If you don‚Äôt see it, scroll a tiny bit.)</div>
    </div>
  </section>

  <!-- Section 2 -->
  <section id="line">
    <div class="card">
      <h1>‚ô°</h1>
      <p>
        Shona, I know you may not like me right now, but this is my apology and I just want to say I love you.
      </p>
      <div class="divider"></div>
      <div class="btnRow">
        <a href="#forgive" style="text-decoration:none;">
          <button class="ghost">Scroll ‚Üì</button>
        </a>
      </div>
    </div>
  </section>

  <!-- Section 3 -->
  <section id="forgive">
    <div class="card" id="forgiveCard">
      <h1>Will you forgive me?</h1>
      <div class="btnRow">
        <button id="yesBtn">Yes</button>
        <button class="ghost" id="noBtn">No</button>
      </div>
      <div class="small" id="answerMsg"></div>
      <div class="small" id="tallyMsg"></div>
    </div>
  </section>

  <!-- Bottom -->
  <section id="bottom">
    <div class="card">
      <div class="footerLove">I love you Shona</div>
    </div>
  </section>

<script>
  // =========================
  // Letter content (exact)
  // =========================
  const letter = `Dear Shona,

I am so dearly sorry from hiding this from you. You really didn't deserve that and it was honestly so disrespectful of me. Additionally, I am so sorry that you didn't have the perfect weekend at UT Austin. I really feel so bad that you cannot imagine. I am literally only crying because of how bad I feel and how much I really miss you. You are truly amazing and you don't deserve any of my bullshit that I put you through. I am going to put so much more effort into everything I promise. I really do mean when I say this. The only reason i want to "go out" is to have a good time with friends. I am so sorry I hid it from you, and you cannot imagine how I feel about it. I know I am wrong. I love you Shona. Please forgive me.`;

  document.getElementById("letterText").textContent = letter;

  // =========================
  // Modal open/close
  // =========================
  const modal = document.getElementById("modal");
  const openLetter = document.getElementById("openLetter");
  const closeModal = document.getElementById("closeModal");
  const scrollFromLetter = document.getElementById("scrollFromLetter");

  openLetter.addEventListener("click", () => {
    modal.classList.add("show");
    // little hearts burst
    for(let i=0;i<18;i++) spawnHeart(window.innerWidth/2, window.innerHeight/2, true);
  });

  closeModal.addEventListener("click", () => modal.classList.remove("show"));
  modal.addEventListener("click", (e) => { if(e.target === modal) modal.classList.remove("show"); });

  scrollFromLetter.addEventListener("click", () => {
    modal.classList.remove("show");
    document.getElementById("line").scrollIntoView({behavior:"smooth"});
  });

  // =========================
  // Hearts generator
  // =========================
  const hearts = ["üíñ","üíò","üíó","üíù","üíû","üíï","‚ù§Ô∏è"];
  const rand = (a,b)=> a + Math.random()*(b-a);

  function spawnHeart(x, y, burst=false){
    const el = document.createElement("div");
    el.className = "heart";
    el.textContent = hearts[Math.floor(Math.random()*hearts.length)];

    const size = burst ? rand(18, 40) : rand(14, 28);
    el.style.fontSize = `${size}px`;

    const dx1 = rand(-40, 40);
    const dy1 = rand(-10, 20);
    const dx2 = dx1 + rand(-160, 160);
    const dy2 = dy1 - rand(260, 560);

    const rot = rand(-28, 28);
    const dur = burst ? rand(1200, 2200) : rand(2200, 4200);

    el.style.setProperty("--x",  `${x + dx1}px`);
    el.style.setProperty("--y",  `${y + dy1}px`);
    el.style.setProperty("--x2", `${x + dx2}px`);
    el.style.setProperty("--y2", `${y + dy2}px`);
    el.style.setProperty("--s",  `${rand(0.9, 1.25)}`);
    el.style.setProperty("--r",  `${rot}deg`);
    el.style.animationDuration = `${dur}ms`;

    document.body.appendChild(el);
    setTimeout(() => el.remove(), dur + 120);
  }

  // continuous hearts from bottom center
  setInterval(() => {
    const x = window.innerWidth/2 + rand(-180, 180);
    const y = window.innerHeight - 10 + rand(-20, 10);
    spawnHeart(x, y, false);
  }, 260);

  // click anywhere = a few hearts
  document.addEventListener("click", (e) => {
    // avoid spam when clicking buttons‚Äîstill cute but lighter
    for(let i=0;i<6;i++) spawnHeart(e.clientX, e.clientY, true);
  }, {passive:true});

  // =========================
  // Confetti
  // =========================
  function confettiBurst(x, y, n=80){
    for(let i=0;i<n;i++){
      const c = document.createElement("div");
      c.className = "confetti";
      const dur = rand(900, 1700);
      const dx = rand(-260, 260);
      const dy = rand(260, 860);
      c.style.setProperty("--cx",  `${x}px`);
      c.style.setProperty("--cy",  `${y}px`);
      c.style.setProperty("--cx2", `${x + dx}px`);
      c.style.setProperty("--cy2", `${y + dy}px`);
      c.style.setProperty("--cr", `${rand(-180, 180)}deg`);
      c.style.animationDuration = `${dur}ms`;
      const hue = Math.floor(rand(0, 360));
      c.style.background = `hsla(${hue}, 95%, 75%, .95)`;
      document.body.appendChild(c);
      setTimeout(()=>c.remove(), dur + 80);
    }
  }

  // =========================
  // Tracking + tally (local)
  // =========================
  const tallyKey = "shona_sorry_tally_v1";
  const tally = JSON.parse(localStorage.getItem(tallyKey) || '{"yes":0,"no":0}');
  const tallyMsg = document.getElementById("tallyMsg");
  const answerMsg = document.getElementById("answerMsg");

  function renderTally(){
    tallyMsg.textContent = `Tally ‚Äî Yes: ${tally.yes} ‚Ä¢ No: ${tally.no}`;
  }
  renderTally();

  // =========================
  // EMAIL / NOTIFY (via endpoint)
  // =========================
  // IMPORTANT:
  // GitHub Pages can't directly send emails safely.
  // Use Formspree (recommended) and paste your endpoint URL below.
  //
  // Steps (2 minutes):
  // 1) Go to formspree.io, create a form, set recipient to jhaveriaryan07@gmail.com
  // 2) Copy your form endpoint URL (looks like https://formspree.io/f/xxxxxxx)
  // 3) Paste it here:
  const FORM_ENDPOINT = "https://formspree.io/f/xkovzkvr";

  async function notify(choice){
    // If endpoint not set, skip silently
    if(!FORM_ENDPOINT || FORM_ENDPOINT.includes("PASTE_YOUR_FORMSPREE")) return;

    const payload = {
      choice,
      yes: tally.yes,
      no: tally.no,
      time: new Date().toISOString(),
      page: location.href
    };

    try{
      await fetch(FORM_ENDPOINT, {
        method: "POST",
        headers: { "Content-Type":"application/json", "Accept":"application/json" },
        body: JSON.stringify(payload)
      });
    } catch(e){
      // ignore errors (site still works)
    }
  }

  // =========================
  // Yes / No logic
  // =========================
  document.getElementById("yesBtn").addEventListener("click", async () => {
    tally.yes += 1;
    localStorage.setItem(tallyKey, JSON.stringify(tally));
    renderTally();

    answerMsg.textContent = "Thank you üíó";
    const r = document.getElementById("forgiveCard").getBoundingClientRect();
    confettiBurst(r.left + r.width/2, r.top + 140, 90);

    await notify("YES");
  });

  document.getElementById("noBtn").addEventListener("click", async () => {
    tally.no += 1;
    localStorage.setItem(tallyKey, JSON.stringify(tally));
    renderTally();

    answerMsg.textContent = "Wrong answer try again üò≠üíó";
    await notify("NO");
  });
</script>
</body>
</html>
